@extends('master')

@section('content')

@extends('master')

@section('content')

 <div class=" breadcrumb-row">
    <div class="container">
        <div class="tla-breadcrumbs">Profile</div>
    </div>
</div>
    
<section class="client-edit-profile">
    <div class="container">
        <div class="client-edit-profile-row ptb15">
            
            <div class="client-edit-profile-first-column">
                <div class="client-edit-profile-first-column-inner">
                    <div class="whitebg mb15 ptb25 plr25 client-dashbord-profile-box">
                        <div class="client-dashbord-profile-box-upper">
                            <div class="client-dashbord-profile-box-upper-image">
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQdwbqQHkf9g_PlvKPp4oGbhfQl1-D8DHizIw&usqp=CAU" alt="Client Image">
                            </div>
                            <div class="Verified-as-a-Lawyer">
                                <img src="https://demo.thelawapp.com.au/assets/img/Verified.png" alt="Verified">
                                <span>Verified as a Lawyer</span>
                            </div>
                        </div>
                        <div class="client-dashbord-profile-box-middle">
                            <h3>Casey Arrington</h3>
                            <div class="rating-star-area">
                                <div class="star-icons">
                                   <img src="https://demo.thelawapp.com.au/assets/img/star.png" alt="star">
                                   <img src="https://demo.thelawapp.com.au/assets/img/star.png" alt="star">
                                   <img src="https://demo.thelawapp.com.au/assets/img/star.png" alt="star">
                                   <img src="https://demo.thelawapp.com.au/assets/img/star.png" alt="star">
                                   <img src="https://demo.thelawapp.com.au/assets/img/star.png" alt="star">
                                </div>
                                <span>5/5</span>
                                <span>(10)</span>
                            </div>
                        </div>
                        <div class="client-dashbord-profile-box-bottom">
                            <a href="#" class="lawyer-view-profile">View Profile</a>
                            <a href="#">Edit Profile</a>
                        </div>
                    </div>
                    <div class="client-edit-profile-first-column-bottom-box mb15 whitebg ptb10 plr25">
                        <div class="user_function-dashbord">
                            <ul>
                                <li><a href="#"><img src="https://demo.thelawapp.com.au/assets/img/bell.png" alt="icon">Notifications</a></li>
                                <li><a href="#"><img src="https://demo.thelawapp.com.au/assets/img/portfolio.png" alt="icon">Available Cases</a></li>                                          
                                <li><a href="#"><img src="https://demo.thelawapp.com.au/assets/img/flag.png" alt="icon">New Milestone</a></li>
                                <li><a href="#"><img src="https://demo.thelawapp.com.au/assets/img/pay.png" alt="icon">Payments</a></li>
                                <li><a href="#"><img src="https://demo.thelawapp.com.au/assets/img/mail.png" alt="icon">Conversations</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="client-edit-profile-second-column-bottom-box mb15 whitebg ptb10 plr25">
                        <div class="user_function-dashbord user_function-bottom">
                            <h3>Account Status</h3>
                            <ul>
                                <li><a href="#"><div><img src="https://demo.thelawapp.com.au/assets/img/mail-p.png" alt="icon">Email Verified</div> <span><img src="https://demo.thelawapp.com.au/assets/img/verifiedd.png" alt="icon"></span></a></li>
                                <li><a href="#"><div><img src="https://demo.thelawapp.com.au/assets/img/Icon-phone.png" alt="icon">Phone Verified</div> <span><img src="https://demo.thelawapp.com.au/assets/img/verifiedd.png" alt="icon"></span></a></li>                                          
                                <li><a href="#"><div><img src="https://demo.thelawapp.com.au/assets/img/pay-p.png" alt="icon">Payment Verified</div> <span><img src="https://demo.thelawapp.com.au/assets/img/verifiedd.png" alt="icon"></span></a></li>
                                <li><a href="#"><div><img src="https://demo.thelawapp.com.au/assets/img/experience.png" alt="icon">Certificate Verified</div> <span><img src="https://demo.thelawapp.com.au/assets/img/verifiedd.png" alt="icon"></span></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="client-edit-profile-middle-column plr15">
                <div class="client-edit-profile-middle-column-inner">
                    <div class="border_1p whitebg client-edit-profile-middle-column-box client-edit-profile-middle-column-box1 mb15 plr25 ptb10">
                        <div class="user-view-profile">
                            <div class="client-form-row mb10">
                                <h4>Account Details</h4>
                                <span id="success_message" style="color:#1cd6d3"></span>
                            </div>
                            <div class="client-form-row view-profile-items">
                                <h3 class="view-profile-name">Name <span>:</span></h3>
                                <h3 class="view-profile-value">Casey Arrington</h3>
                            </div>
                            <div class="client-form-row view-profile-items">
                                <h3 class="view-profile-name">Email <span>:</span></h3>
                                <h3 class="view-profile-value">henten@gmail.com</h3>
                            </div>
                            <div class="client-form-row view-profile-items">
                                <h3 class="view-profile-name">Location <span>:</span></h3>
                                <h3 class="view-profile-value">United Gaibandha, Bangladesh</h3>
                            </div>
                            <div class="client-form-row view-profile-items">
                                <h3 class="view-profile-name">Postcode <span>:</span></h3>
                                <h3 class="view-profile-value">98485</h3>
                            </div>
                            <div class="client-form-row view-profile-about">
                                <h2>About <span>:</span></h2>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="client-edit-profile-last-column">
                <div class="client-edit-profile-last-column-inner">
                    <div class="border_1p whitebg client-edit-profile-last-column-box client-edit-profile-last-column-box1 mb15 plr15 ptb10">
                        <div class="client-form-row">
                            <h4>Profile status</h4>
                        </div>
                        <div class="profile-ac-status">
                            <div class="profile-ac-status-single profile-ac-status-single-top">
                                <h4>Account Details</h4>
                                <div class="profile-ac-status-single-right">
                                    <div class="profile-ac-status-fill"></div>
                                    <span>100%</span>
                                </div>
                            </div>
                            <div class="profile-ac-status-single profile-ac-status-single-bottom">
                                <h4>Verify your phone</h4>
                                <div class="profile-ac-status-single-right">
                                    <span>Not verified yet</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="border_1p whitebg client-edit-profile-last-column-box client-edit-profile-last-column-box2 plr15 ptb15">
                        <div class="client-form-row">
                            <h4>Notifications</h4>
                        </div>
                        <div class="profile-ac-notifications">
                            <div class="profile-ac-notifications-single">
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<form method="post" id="upload_logo" enctype="multipart/form-data" style="display:none;">
    {{ csrf_field() }}
    <input type="file" name="upload_client_profile_image" id="upload_client_profile_image"   />
</form>
    
    @endsection

@section('scripts')

<script src="{{asset('backend/vendor/jquery/jquery-1.12.3.min.js')}}"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="{{asset('backend/vendor/jquery/validate.min.js')}}"></script>

<script type="text/javascript">
 
 // Wait for the DOM to be ready

    $(function() {
      $("form[name='clientProfile']").validate({
        rules: {
          first_name: "required",
          last_name: "required",
          location: "required",
          post_code: "required",
          about: "required",
          email: "required",
          location_name: "required",
        },
        messages: {
          first_name: "required",
          last_name: "required",
          location: "required",
          post_code: "required",
          about: "required",
          email: "required",
          location_name: "required",
        },
        submitHandler: function(form) {
          //form.submit();
          
                //console.log('Called');
                var form = $('#clientProfile')[0];       
                var bodyFormData = new FormData(form);    
                
                axios({
                    method: 'post',
                    url: "{{route('client.update.profile')}}",
                    data: bodyFormData,
                    headers: {'Content-Type': 'multipart/form-data' }
                })
                .then(function (response) {
                    console.log(response);
                    console.log(response.data.message);
                    $('#success_message').html(response.data.message).delay(5000).fadeOut();
                })
                .catch(function (response) {
                    console.log(response);
                });
                
 
        }
      });
    });
    
    //send verification code
    $(function() {
      $("form[name='user_phone_code']").validate({
        rules: {
          phone_number: "required",
          country_code: {
                required: {
                    depends: function(element) {
                        return $("#country_code").val() == '';
                    }
                }
            },
        },
        messages: {
          phone_number: "required",
          country_code: "required",
        },
        submitHandler: function(form) {
            
                console.log('Called');
                var form = $('#user_phone_code')[0];       
                var bodyFormData = new FormData(form);    
                console.log(bodyFormData);
                
                axios({
                    method: 'post',
                    url: "{{route('send.varification.code')}}",
                    data: bodyFormData,
                    headers: {'Content-Type': 'multipart/form-data' }
                })
                .then(function (response) {
                    console.log(response);
                    console.log(response.data.message);
                    $('#send_message_success').html(response.data.message).delay(5000).fadeOut();
                    $('#sendVarifyButton').css('display', 'none');
                    $('#resendVerificationCode').css('display', 'block');
                    $('#user_phone_verify').css('display', 'block');
                    
                })
                .catch(function (response) {
                    console.log(response);
                });
                
 
        }
      });
    });
    
    
    //confirm verification code
    $(function() {
      $("form[name='user_phone_verify']").validate({
        rules: {
          verification_code: "required",
        },
        messages: {
          verification_code: "required",
        },
        submitHandler: function(form) {
            
                console.log('Called');
                var form = $('#user_phone_verify')[0];       
                var bodyFormData = new FormData(form);    
                console.log(bodyFormData);
                
                axios({
                    method: 'post',
                    url: "{{route('varify.code')}}",
                    data: bodyFormData,
                    headers: {'Content-Type': 'multipart/form-data' }
                })
                .then(function (response) {
                    console.log(response);
                    $('#send_message_success').html(response.data.message).delay(5000).fadeOut();
                    $('#sendVarifyButton').css('display', 'block');
                    $('#resendVerificationCode').css('display', 'none');
                    $('#user_phone_verify').css('display', 'none');
                    //$("#user_phone_code")[0].reset();
                    $("#user_phone_verify")[0].reset();
                    
                })
                .catch(function (response) {
                    console.log(response);
                    $('#send_message_success').html('Invalid token!').delay(5000).fadeOut();
                });
                
 
        }
      });
    });
    
    //user change password
    $(function() {
      $("form[name='user_password_change']").validate({
        rules: {
            current_password: "required",
            new_password: "required",
            confirm_password: {
              equalTo: "#new_password",
            }
        },
        messages: {
            current_password: "required",
            new_password: "required",
            confirm_password: "new & confirm password does't match!",
        },
        submitHandler: function(form) {
            
                var form = $('#user_password_change')[0];       
                var bodyFormData = new FormData(form);    
                console.log(bodyFormData);
                
                axios({
                    method: 'post',
                    url: "{{route('client.password.change')}}",
                    data: bodyFormData,
                    headers: {'Content-Type': 'multipart/form-data' }
                })
                .then(function (response) {
                    console.log(response);
                    $('#send_message_success').html(response.data.message).delay(5000).fadeOut();
                    
                })
                .catch(function (response) {
                    console.log(response);
                    $('#send_message_success').html('Something wrong!').delay(5000).fadeOut();
                });
                
 
        }
      });
    });
    
    //upload client profile image
    function clientProfileImage(){
        $("input[id='upload_client_profile_image']").focus().click();
        
         $("#upload_client_profile_image").change(function() {
             readURL(this);
            var bodyFormData = new FormData()
            if($("#upload_client_profile_image")[0].files.length>0){
               bodyFormData.append("upload_client_profile_image",$("#upload_client_profile_image")[0].files[0])
               console.log(bodyFormData);
               console.log('ok');
            }
            
            axios({
                method: 'post',
                url: "{{route('client.profile.image.upload')}}",
                data: bodyFormData,
                headers: {'Content-Type': 'multipart/form-data' }
            })
            .then(function (response) {
                console.log(response);
                $('#profile_image_success').html(response.data.message).delay(5000).fadeOut();
                $(".clientImageUrl").css('display', 'block');
                $(".clientImageVisible").css('display', 'none');
            })
            .catch(function (response) {
                console.log(response);
            });
            
         });
        
    }
    
    //delete client profile
    function clientProfileImageDelete(){
        var bodyFormData = new FormData()
        axios({
            method: 'post',
            url: "{{route('client.profile.image.delete')}}",
            data: bodyFormData,
            headers: {'Content-Type': 'multipart/form-data' }
        })
        .then(function (response) {
            console.log(response);
            $('#profile_image_delete').html(response.data.message).delay(5000).fadeOut();
            $(".clientImageUrl").css('display', 'none');
            $(".clientImageVisible").css('display', 'block');
            
        })
        .catch(function (response) {
            console.log(response);
        });
    }
    
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        
        reader.onload = function(e) {
          $('#clientImageShow').attr('src', e.target.result);
        }
        
        reader.readAsDataURL(input.files[0]); // convert to base64 string
      }
    }
    

</script>


@endsection
@endsection

@section('scripts')


@endsection